<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="http://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../Solution/css/slick.css">
    <link rel="stylesheet" href="./coin.css">
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>
<body>
    <div class="coin_list" style="position:relative; left: 10px; top: 10px;">
        <ul class="row">
            <li class="coin">
                <div class="img-box"><img style="width: 186px; height: 228px; margin-top: 5px; text-align: center;" src="./img/감자.png" alt=""></div>
                <div class="product-info" style="margin-top: 18px;">
                    <div class="quantity" style="width: 90px;">
                        <input class="minus" type='button' onclick='poatatocount("minus")' value='-' />
                        <div id='result1' >0</div>
                        <input class="plus" type='button' onclick='poatatocount("plus")' value='+' />
                    </div>
                    <div class="product-name">감자<span class="product-e-name">Potato</span></div>
                    <input class="product-button" type="button" onclick='poatatocount("save");' style="text-align: center;" value="채소 매수"/>
                </div>
            </li>
        </ul>
    </div>
    <button id="confirmStart">alert test</button>
</body>
<script>
    function poatatocount(type) {
        if (typeof (Storage) !== "undefined") {

            const result = document.getElementById("result1");
            let cnt = result.innerHTML;

            if (type === 'plus') {

                if(localStorage.potato){
                    cnt = parseInt(cnt) + 1;
                } else {
                    localStorage.potato = 0;
                }
            } else if (type === 'minus') {
                if(cnt > 0){
                    cnt = parseInt(cnt) - 1;
                }
            } else if (type === 'save'){

                if(cnt != 0){
                    Swal.fire({
                        title: parseInt(cnt * (5880/100)) + '포인트에 매수할까요?',
                        text: '감자 수 총 (' + cnt + ')개 X 현재 시세('+5880+'/100)',
                        icon: 'question',
                        showCancelButton: true,
                        confirmButtonColor: '#6A9258',
                        cancelButtonColor: '#AAAAAA',
                        confirmButtonText: '매수',
                        cancelButtonText: '취소'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            Swal.fire({
                                title:'매수가 완료되었습니다.',
                                text:'마이페이지에서 확인할 수 있습니다',
                                icon:'success',
                                confirmButtonColor: '#6A9258'
                            })
                        }
                    })
                }else{
                    Swal.fire(
                        '수량을 선택해주세요',
                        '',
                        'warning'
                    )
                }
            }
            result.innerHTML = cnt;

        } else {
		document.getElementById("result").innerHTML = "web storage 지원 X.";
	    }
    }
</script>
</html>